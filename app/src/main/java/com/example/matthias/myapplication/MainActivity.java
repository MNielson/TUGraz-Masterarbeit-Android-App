package com.example.matthias.myapplication;

import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.widget.TextView;

import java.util.LinkedList;

public class MainActivity extends AppCompatActivity {

    // Used to load the 'native-lib' library on application startup.

    //post runables to this thread to run them on the worker thread
    private AudioWorker mAudioWorker;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);


        // Example of a call to a native method
        TextView tv = findViewById(R.id.sample_text);
        //tv.setText(stringFromJNI());
        PitchDetector pd = new PitchDetector();

        double[] bar = {0,1036886016,1045139456,1050022912,1052989440,1055695872,1057526784,1058541568,1059354624,1059949056,1060313088,1060439040,1060324864,1059972608,1059389440,1058587136,1057582080,1055823872,1053130752,1050176512,1045463040,1037553664,1000669184,-1111265280,-1102669824,-1097615360,-1094637568,-1091915776,-1090012672,-1088988160,-1088164864,-1087559168,-1087183360,-1087045120,-1087147008,-1087487488,-1088059904,-1088851456,-1089846784,-1091533824,-1094211584,-1097154560,-1101697024,-1109258240,-1138425856,1035546624,1044488192,1049714688,1052702720,1055438848,1057414656,1058448896,1059282944,1059899904,1060287488,1060437504,1060347392,1060018688,1059458048,1058676736,1057691136,1056075776,1053413376,1050481664,1046108160,1038888960,1014464512,-1112608768,-1103321088,-1097924608,-1094924288,-1092174848,-1090125312,-1089081856,-1088237568,-1087609344,-1087209984,-1087048192,-1087126016,-1087442944,-1087992320,-1088762880,-1089738752,-1091281920,-1093931008,-1096849408,-1101053952,-1107927040,-1130037248,1034203136,1043834880,1049403392,1052414976,1055177728,1057300992,1058354176,1059208704,1059848192,1060259328,1060433408,1060366848,1060062208,1059524096,1058764288,1057798144,1056325632,1053691904,1050785792,1046751232,1040205824,1020149760,-1113952256,-1103974400,-1098235904,-1095214080,-1092436992,-1090240000,-1089177600,-1088312320,-1087662080,-1087239680,-1087053312,-1087107584,-1087400960,-1087927296,-1088676352,-1089632768,-1091034112,-1093652480,-1096547328,-1100410880,-1106946048,-1124630528,1032859648,1043179520,1049091072,1052124160,1054914560,1057185792,1058257408,1059132928,1059794432,1060228608,1060426752,1060384256,1060103168,1059588096,1058849792,1057903616,1056571392,1053969408,1051086848,1047392256,1040869376,1024483328,-1115295744,-1104631808,-1098549248,-1095505920,-1092702208,-1090356224,-1089275392,-1088389632,-1087716864,-1087271424,-1087060992,-1087091200,-1087361024,-1087864320,-1088591872,-1089528320,-1090790400,-1093377024,-1096247296,-1099773952,-1106282496,-1121648640,1031225344,1042522112,1048776704,1051830272,1054648320,1057068544,1058158592,1059054592,1059738112,1060195840,1060417536,1060399616,1060142080,1059650048,1058933248,1058007040,1056815104,1054242816,1051385856,1048029184,1041532928,1027186688,-1117601792,-1105291264,-1098864640,-1095800832,-1092970496,-1090474496,-1089375232,-1088468992,-1087774208,-1087305216,-1087071232,-1087077376,-1087323136,-1087803904,-1088509440,-1089425408,-1090548736,-1093104640,-1095949312,-1099137024,-1105620992,-1118953472,1028530176,1041862656,1048346624,1051534336,1054379008,1056934912,1058058240,1058974208,1059679744,1060160512,1060406272,1060412416,1060178432,1059709440,1059014656,1058108416,1057009152,1054513152,1051682816,1048619008,1042192384,1029881856,-1120296960,-1105950720,-1099454464,-1096097792,-1093240832,-1090668544,-1089476608,-1088550400,-1087833600,-1087341568,-1087084032,-1087066112,-1087287808,-1087745536,-1088429056,-1089325056,-1090415104,-1092835328,-1095653376,-1098706944,-1104961536,-1116258304,1025835008,1041201152,1047709696,1051236352,1054106624,1056693248,1057955328,1058891776,1059619328,1060122624,1060392448,1060422656,1060212224,1059766784,1059094016,1058208256,1057127424,1054781440,1051977728,1048934400,1042851840,1032187904,-1123000320,-1106614272,-1100091392,-1096396800,-1093514240,-1090912256,-1089580032,-1088633856,-1087895552,-1087380480,-1087099392,-1087056896,-1087255040,-1087689216,-1088350720,-1089226240,-1090297856,-1092569088,-1095359488,-1098392576,-1104304128,-1114624000,1022853120,1040537600,1047072768,1050936320,1053831168,1056449536,1057850880,1058807296,1059556352,1060082688,1060376064,1060430336,1060243968,1059821568,1059171328,1058306048,1057243648,1055046656,1052269568,1049247744,1043509248,1033531392,-1127333888,-1107277824,-1100732416,-1096697856,-1093791744,-1091158016,-1089685504,-1088719360,-1087959552,-1087421440,-1087116800,-1087050240,-1087224320,-1087635456,-1088274944,-1089129472,-1090182656,-1092305920,-1095068672,-1098080256,-1103648768,-1113280512,1017446400,1039556608,1046429696,1050634240,1053552640,1056201728,1057744896,1058720768,1059491328,1060040704,1060357632,1060435456,1060273664,1059874304,1059246080,1058401792,1057358336,1055308800,1052559360,1049559040,1044162560,1034874880,-1133019136,-1108594688,-1101375488,-1097001984,-1094070272,-1091407872,-1089792512,-1088806912,-1088025600,-1087464960,-1087136256,-1087046144,-1087196160,-1087583744,-1088200704,-1089034752,-1090068992,-1092044800,-1094780928,-1097768960,-1102995456,-1111937024,1009057792,1038225408,1045786624,1050329088,1053272064,1055949824,1057636864,1058632192,1059423744,1059996160,1060336640,1060438528,1060300288,1059924480,1059318784,1058495488,1057470976,1055567872,1052846080,1049868288,1044813824,1036218368,-1146814464,-1109929984,-1102020608,-1097307136,-1094352896,-1091659776,-1089901568,-1088896512,-1088094208,-1087511040,-1087158784,-1087044608,-1087170560,-1087534592,-1088129024,-1088942080,-1089956864,-1091787776,-1094494208,-1097460736,-1102344192,-1110597632,0,1036886016,1045139456,1050022912,1052989440,1055695872,1057526784,1058541568,1059354624,1059949056,1060313088,1060439040,1060324864,1059972608,1059389440,1058587136,1057582080,1055823872,1053130752,1050176512,1045463040,1037553664,1000669184,-1111265280,-1102669824,-1097615360,-1094637568,-1091915776,-1090012672,-1088988160,-1088164864,-1087559168,-1087183360,-1087045120,-1087147008,-1087487488,-1088059904,-1088851456,-1089846784,-1091533824,-1094211584,-1097154560,-1101697024,-1109258240,-1138425856,1035546624,1044488192,1049714688,1052702720,1055438848,1057414656,1058448896,1059282944,1059899904,1060287488,1060437504,1060347392,1060018688,1059458048,1058676736,1057691136,1056075776,1053413376,1050481664,1046108160,1038888960,1014464512,-1112608768,-1103321088,-1097924608,-1094924288,-1092174848,-1090125312,-1089081856,-1088237568,-1087609344,-1087209984,-1087048192,-1087126016,-1087442944,-1087992320,-1088762880,-1089738752,-1091281920,-1093931008,-1096849408,-1101053952,-1107927040,-1130037248,1034203136,1043834880,1049403392,1052414976,1055177728,1057300992,1058354176,1059208704,1059848192,1060259328,1060433408,1060366848,1060062208,1059524096,1058764288,1057798144,1056325632,1053691904,1050785792,1046751232,1040205824,1020149760,-1113952256,-1103974400,-1098235904,-1095214080,-1092436992,-1090240000,-1089177600,-1088312320,-1087662080,-1087239680,-1087053312,-1087107584,-1087400960,-1087927296,-1088676352,-1089632768,-1091034112,-1093652480,-1096547328,-1100410880,-1106946048,-1124630528,1032859648,1043179520,1049091072,1052124160,1054914560,1057185792,1058257408,1059132928,1059794432,1060228608,1060426752,1060384256,1060103168,1059588096,1058849792,1057903616,1056571392,1053969408,1051086848,1047392256,1040869376,1024483328,-1115295744,-1104631808,-1098549248,-1095505920,-1092702208,-1090356224,-1089275392,-1088389632,-1087716864,-1087271424,-1087060992,-1087091200,-1087361024,-1087864320,-1088591872,-1089528320,-1090790400,-1093377024,-1096247296,-1099773952,-1106282496,-1121648640,1031225344,1042522112,1048776704,1051830272,1054648320,1057068544,1058158592,1059054592,1059738112,1060195840,1060417536,1060399616,1060142080,1059650048,1058933248,1058007040,1056815104,1054242816,1051385856,1048029184,1041532928,1027186688,-1117601792,-1105291264,-1098864640,-1095800832,-1092970496,-1090474496,-1089375232,-1088468992,-1087774208,-1087305216,-1087071232,-1087077376,-1087323136,-1087803904,-1088509440,-1089425408,-1090548736,-1093104640,-1095949312,-1099137024,-1105620992,-1118953472,1028530176,1041862656,1048346624,1051534336,1054379008,1056934912,1058058240,1058974208,1059679744,1060160512,1060406272,1060412416,1060178432,1059709440,1059014656,1058108416,1057009152,1054513152,1051682816,1048619008,1042192384,1029881856,-1120296960,-1105950720,-1099454464,-1096097792,-1093240832,-1090668544,-1089476608,-1088550400,-1087833600,-1087341568,-1087084032,-1087066112,-1087287808,-1087745536,-1088429056,-1089325056,-1090415104,-1092835328,-1095653376,-1098706944,-1104961536,-1116258304,1025835008,1041201152,1047709696,1051236352,1054106624,1056693248,1057955328,1058891776,1059619328,1060122624,1060392448,1060422656,1060212224,1059766784,1059094016,1058208256,1057127424,1054781440,1051977728,1048934400,1042851840,1032187904,-1123000320,-1106614272,-1100091392,-1096396800,-1093514240,-1090912256,-1089580032,-1088633856,-1087895552,-1087380480,-1087099392,-1087056896,-1087255040,-1087689216,-1088350720,-1089226240,-1090297856,-1092569088,-1095359488,-1098392576,-1104304128,-1114624000,1022853120,1040537600,1047072768,1050936320,1053831168,1056449536,1057850880,1058807296,1059556352,1060082688,1060376064,1060430336,1060243968,1059821568,1059171328,1058306048,1057243648,1055046656,1052269568,1049247744,1043509248,1033531392,-1127333888,-1107277824,-1100732416,-1096697856,-1093791744,-1091158016,-1089685504,-1088719360,-1087959552,-1087421440,-1087116800,-1087050240,-1087224320,-1087635456,-1088274944,-1089129472,-1090182656,-1092305920,-1095068672,-1098080256,-1103648768,-1113280512,1017446400,1039556608,1046429696,1050634240,1053552640,1056201728,1057744896,1058720768,1059491328,1060040704,1060357632,1060435456,1060273664,1059874304,1059246080,1058401792,1057358336,1055308800,1052559360,1049559040,1044162560,1034874880,-1133019136,-1108594688,-1101375488,-1097001984,-1094070272,-1091407872,-1089792512,-1088806912,-1088025600,-1087464960,-1087136256,-1087046144,-1087196160,-1087583744,-1088200704,-1089034752,-1090068992,-1092044800,-1094780928,-1097768960,-1102995456,-1111937024,1009057792,1038225408,1045786624,1050329088,1053272064,1055949824,1057636864,1058632192,1059423744,1059996160,1060336640,1060438528,1060300288,1059924480,1059318784,1058495488,1057470976,1055567872,1052846080,1049868288,1044813824,1036218368,-1146814464,-1109929984,-1102020608,-1097307136,-1094352896,-1091659776,-1089901568,-1088896512,-1088094208,-1087511040,-1087158784,-1087044608,-1087170560,-1087534592,-1088129024,-1088942080,-1089956864,-1091787776,-1094494208,-1097460736,-1102344192,-1110597632,0,1036886016,1045139456,1050022912,1052989440,1055695872,1057526784,1058541568,1059354624,1059949056,1060313088,1060439040,1060324864,1059972608,1059389440,1058587136,1057582080,1055823872,1053130752,1050176512,1045463040,1037553664,1000669184,-1111265280,-1102669824,-1097615360,-1094637568,-1091915776,-1090012672,-1088988160,-1088164864,-1087559168,-1087183360,-1087045120,-1087147008,-1087487488,-1088059904,-1088851456,-1089846784,-1091533824,-1094211584,-1097154560,-1101697024,-1109258240,-1138425856,1035546624,1044488192,1049714688,1052702720,1055438848,1057414656,1058448896,1059282944,1059899904,1060287488,1060437504,1060347392,1060018688,1059458048,1058676736,1057691136,1056075776,1053413376,1050481664,1046108160,1038888960,1014464512,-1112608768,-1103321088,-1097924608,-1094924288,-1092174848,-1090125312,-1089081856,-1088237568,-1087609344,-1087209984,-1087048192,-1087126016,-1087442944,-1087992320,-1088762880,-1089738752,-1091281920,-1093931008,-1096849408,-1101053952,-1107927040,-1130037248,1034203136,1043834880,1049403392,1052414976,1055177728,1057300992,1058354176,1059208704,1059848192,1060259328,1060433408,1060366848,1060062208,1059524096,1058764288,1057798144,1056325632,1053691904,1050785792,1046751232,1040205824,1020149760,-1113952256,-1103974400,-1098235904,-1095214080,-1092436992,-1090240000,-1089177600,-1088312320,-1087662080,-1087239680,-1087053312,-1087107584,-1087400960,-1087927296,-1088676352,-1089632768,-1091034112,-1093652480,-1096547328,-1100410880,-1106946048,-1124630528,1032859648,1043179520,1049091072,1052124160,1054914560,1057185792,1058257408,1059132928,1059794432};
        double foo = pd.computePitch(bar, 0, bar.length);
        tv.setText(String.valueOf(foo));

        mAudioWorker = new AudioWorker("myWorkerThread", pd);
        mAudioWorker.start();
        mAudioWorker.prepareHandler();

        AudioFileReader audioFileReader = new AudioFileReader(mAudioWorker, this);
        Log.d("myTag", "myMessage");
        LinkedList<Double> pitches = audioFileReader.readPitchFromAudioFile();
        for(Double pitch : pitches){
            Log.d("DetectedPitch:", pitch.toString() + "hz");
        }


    }


}
